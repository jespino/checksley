/*! checksley 2013-11-07*/
/*! Version: 0.4.0 */
/*! License: BSD */
!function(){var Checksley,ComposedField,Field,FieldMultiple,Form,checksley,defaults,formatMessage,messages,toInt,validators,_checksley,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};defaults={inputs:"input, textarea, select",excluded:"input[type=hidden], input[type=file], :disabled",focus:"first",validationMinlength:3,validateIfUnchanged:!1,interceptSubmit:!0,messages:{},validators:{},showErrors:!0,errorClass:"checksley-error",successClass:"checksley-ok",validatedClass:"checksley-validated",onlyOneErrorElement:!1,containerClass:"checksley-error-list",containerGlobalSearch:!1,containerPreferenceSelector:".errors-box",errors:{classHandler:function(element){return element},container:function(element){return element.parent()},errorsWrapper:"<ul />",errorElem:"<li />"},listeners:{onFieldValidate:function(){return!1},onFormSubmit:function(){},onFieldError:function(){},onFieldSuccess:function(){}}},validators={notnull:function(val){return val.length>0},notblank:function(val){return _.isString(val)&&""!==val.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(val){var element,_i,_len;if(_.isArray(val)){for(_i=0,_len=val.length;_len>_i;_i++)if(element=val[_i],validators.required(val[i]))return!0;return!1}return validators.notnull(val)&&validators.notblank(val)},type:function(val,type){var regExp;switch(regExp=null,type){case"number":regExp=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":regExp=/^\d+$/;break;case"alphanum":regExp=/^\w+$/;break;case"email":regExp=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;break;case"url":/(https?|s?ftp|git)/i.test(val)||(val="http://"+val),regExp=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"urlstrict":regExp=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":regExp=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case"phone":regExp=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/}return regExp?regExp.test(val):!1},regexp:function(val,regExp,self){return new RegExp(regExp,self.options.regexpFlag||"").test(val)},minlength:function(val,min){return val.length>=min},maxlength:function(val,max){return val.length<=max},rangelength:function(val,arrayRange){return val.length>=arrayRange[0]&&val.length<=arrayRange[1]},min:function(val,min){return Number(val)>=min},max:function(val,max){return Number(val)<=max},range:function(val,arrayRange){return val>=arrayRange[0]&&val<=arrayRange[1]},equalto:function(val,elem,self){return self.options.validateIfUnchanged=!0,val===$(elem).val()},mincheck:function(obj,val){return validators.minlength(obj,val)},maxcheck:function(obj,val){return validators.maxlength(obj,val)},rangecheck:function(obj,arrayRange){return validators.rangelength(obj,arrayRange)}},messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric.",phone:"This value should be a valid phone number."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},formatMessage=function(message,args){return _.isArray(args)||(args=[args]),message.indexOf("%s")>=0?message.replace(/%s/g,function(){return String(args.shift())}):message.indexOf("%e")>=0?message.replace(/%e/g,function(){return String($(args.shift()).val())}):message},toInt=function(num){return parseInt(num,10)},_checksley=function(options){var element,instance,_options;if(element=$(this),!element.is("form, input, select, textarea"))throw"element is not a valid element for checksley";if(instance=element.data("checksley"),(void 0===instance||null===instance)&&(_options={},_.isPlainObject(options)&&(_options=options),instance=element.is("input[type=radio], input[type=checkbox]")?new FieldMultiple(element,options):element.is("input, select, textarea")?new Field(element,options):new Form(element,options)),!_.isString(options))return instance;switch(options){case"validate":return instance.validate();case"destroy":return instance.destroy();case"reset":return instance.reset()}},Checksley=function(){function Checksley(jq){this.jq=void 0===jq?window.jQuery||window.Zepto:jq,this.messages={"default":{defaultMessage:"Invalid"}},this.lang=this.detectLang()}return Checksley.prototype.updateDefaults=function(options){return _.merge(defaults,options)},Checksley.prototype.updateValidators=function(_validators){return _.extend(validators,_validators)},Checksley.prototype.updateMessages=function(lang,messages,overwrite){return null==overwrite&&(overwrite=!1),void 0===this.messages[lang]&&(this.messages[lang]={}),overwrite?this.messages[lang]=messages:_.merge(this.messages[lang],messages)},Checksley.prototype.injectPlugin=function(){return this.jq.fn.checksley=_checksley},Checksley.prototype.setLang=function(lang){return this.lang=lang},Checksley.prototype.detectLang=function(){return this.jq("html").attr("lang")||"default"},Checksley.prototype.getMessage=function(key,lang){var message;return void 0===lang&&(lang=this.lang),messages=this.messages[lang],void 0===messages&&(messages={}),message=messages[key],void 0===message?"default"===lang?this.getMessage("defaultMessage",lang):this.getMessage(key,"default"):message},Checksley}(),Field=function(){function Field(elm,options){null==options&&(options={}),this.id=_.uniqueId("field-"),this.element=$(elm),this.validatedOnce=!1,this.options=_.merge({},defaults,options),this.isRadioOrCheckbox=!1,this.validators=validators,this.resetConstraints(),this.bindEvents(),this.bindData()}return Field.prototype.bindData=function(){return this.element.data("checksley-field",this)},Field.prototype.unbindData=function(){return this.element.data("checksley-field",null)},Field.prototype.focus=function(){return this.element.focus()},Field.prototype.eventValidate=function(event){var trigger,value;return trigger=this.element.data("trigger"),value=this.getValue(),"keyup"!==event.type||/keyup/i.test(trigger)||this.validatedOnce?"change"!==event.type||/change/i.test(trigger)||this.validatedOnce?value.length<this.options.validationMinlength&&!this.validatedOnce?!0:this.validate():!0:!0},Field.prototype.unbindEvents=function(){return this.element.off("."+this.id)},Field.prototype.bindEvents=function(){var trigger;return this.unbindEvents(),trigger=this.element.data("trigger"),_.isString(trigger)&&this.element.on(""+trigger+"."+this.id,_.bind(this.eventValidate,this)),this.element.is("select")&&"change"!==trigger&&this.element.on("change."+this.id,_.bind(this.eventValidate,this)),"keyup"!==trigger?this.element.on("keyup."+this.id,_.bind(this.eventValidate,this)):void 0},Field.prototype.errorClassTarget=function(){return this.element},Field.prototype.resetHtml5Constraints=function(){var max,min,type,typeRx;if(this.element.prop("required")&&(this.required=!0),typeRx=new RegExp(this.element.attr("type"),"i"),typeRx.test("email url number range"))switch(type=this.element.attr("type")){case"range":if(min=this.element.attr("min"),max=this.element.attr("max"),min&&max)return this.constraints[type]={valid:!0,params:[toInt(min),toInt(max)],fn:this.validators[type]}}},Field.prototype.resetConstraints=function(){var constraint,fn,_ref,_results;this.constraints={},this.valid=!0,this.required=!1,this.resetHtml5Constraints(),this.element.addClass("checksley-validated"),_ref=this.validators,_results=[];for(constraint in _ref)fn=_ref[constraint],void 0!==this.element.data(constraint)&&(this.constraints[constraint]={valid:!0,params:this.element.data(constraint),fn:fn},"required"===constraint?_results.push(this.required=!0):_results.push(void 0));return _results},Field.prototype.hasConstraints=function(){return!_.isEmpty(this.constraints)},Field.prototype.validate=function(showErrors){return this.validatedOnce=!0,this.hasConstraints()?this.options.listeners.onFieldValidate(this.element,this)?(this.reset(),null):this.required||""!==this.getValue()?this.applyValidators(showErrors):(this.reset(),null):null},Field.prototype.applyValidators=function(showErrors){var data,listeners,name,val,valid,_ref;(void 0===showErrors||null===showErrors)&&(showErrors=this.options.showErrors),val=this.getValue(),valid=!0,listeners=this.options.listeners,showErrors&&this.removeErrors(),_ref=this.constraints;for(name in _ref)data=_ref[name],data.valid=data.fn(this.getValue(),data.params,this),data.valid===!1?(valid=!1,showErrors&&this.manageError(name,data),listeners.onFieldError(this.element,data,this)):listeners.onFieldSuccess(this.element,data,this);return this.handleClasses(valid),valid},Field.prototype.handleClasses=function(valid){var classHandlerElement,errorClass,successClass;switch(classHandlerElement=this.options.errors.classHandler(this.element,!1),errorClass=this.options.errorClass,successClass=this.options.successClass,valid){case null:return classHandlerElement.removeClass(errorClass),classHandlerElement.removeClass(successClass);case!1:return classHandlerElement.removeClass(successClass),classHandlerElement.addClass(errorClass);case!0:return classHandlerElement.removeClass(errorClass),classHandlerElement.addClass(successClass)}},Field.prototype.manageError=function(name,constraint){var data,message;return data=this.element.data(),message=void 0!==data.errorMessage?data.errorMessage:"type"===name?checksley.getMessage("type")[constraint.params]:checksley.getMessage(name),void 0===message&&(message=checksley.getMessage("default")),constraint.params&&(message=formatMessage(message,_.clone(constraint.params,!0))),this.addError(this.makeErrorElement(name,message))},Field.prototype.setErrors=function(messages){var message,_i,_len,_results;for(this.removeErrors(),_.isArray(messages)||(messages=[messages]),_results=[],_i=0,_len=messages.length;_len>_i;_i++)message=messages[_i],_results.push(this.addError(this.makeErrorElement("custom",message)));return _results},Field.prototype.makeErrorElement=function(constraintName,message){var element;return element=$("<li />",{"class":"checksley-"+constraintName}),element.html(message),element.addClass(constraintName),element},Field.prototype.addError=function(errorElement){var container;return container=this.getErrorContainer(),this.options.errors.onlyOneErrorElement&&container.empty(),container.append(errorElement)},Field.prototype.reset=function(){return this.handleClasses(null),this.resetConstraints(),this.removeErrors()},Field.prototype.removeErrors=function(){return $("#"+this.errorContainerId()).remove()},Field.prototype.getValue=function(){return this.element.val()},Field.prototype.errorContainerId=function(){return"checksley-error-"+this.id},Field.prototype.errorContainerClass=function(){return"checksley-error-list"},Field.prototype.getErrorContainer=function(){var container,definedContainer,errorContainerEl,params,preferenceSelector;return errorContainerEl=$("#"+this.errorContainerId()),1===errorContainerEl.length?errorContainerEl:(params={"class":this.errorContainerClass(),id:this.errorContainerId()},errorContainerEl=$("<ul />",params),definedContainer=this.element.data("error-container"),void 0===definedContainer?(this.isRadioOrCheckbox?errorContainerEl.insertAfter(this.element.parent()):errorContainerEl.insertAfter(this.element),errorContainerEl):(container=this.options.errors.containerGlobalSearch?$(definedContainer):this.element.closest(definedContainer),preferenceSelector=this.options.errors.containerPreferenceSelector,1===container.find(preferenceSelector).length&&(container=container.find(preferenceSelector)),container.append(errorContainerEl),errorContainerEl))},Field.prototype.destroy=function(){return this.unbindEvents(),this.removeErrors(),this.unbindData()},Field.prototype.setForm=function(form){return this.form=form},Field}(),FieldMultiple=function(_super){function FieldMultiple(elm,options){FieldMultiple.__super__.constructor.call(this,elm,options),this.isRadioOrCheckbox=!0,this.isRadio=this.element.is("input[type=radio]"),this.isCheckbox=this.element.is("input[type=checkbox]")}return __extends(FieldMultiple,_super),FieldMultiple.prototype.getSiblings=function(){var group;return group=this.element.data("group"),void 0===group?"input[name="+this.element.attr("name")+"]":'[data-group="'+group+'"]'},FieldMultiple.prototype.getValue=function(){var element,values,_i,_len,_ref;if(this.isRadio)return $(""+this.getSiblings()+":checked").val()||"";if(this.isCheckbox){for(values=[],_ref=$(""+this.getSiblings()+":checked"),_i=0,_len=_ref.length;_len>_i;_i++)element=_ref[_i],values.push($(element).val());return values}},FieldMultiple.prototype.unbindEvents=function(){var element,_i,_len,_ref,_results;for(_ref=$(this.getSiblings()),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)element=_ref[_i],_results.push($(element).off("."+this.id));return _results},FieldMultiple.prototype.bindEvents=function(){var element,trigger,_i,_len,_ref,_results;for(this.unbindEvents(),trigger=this.element.data("trigger"),_ref=$(this.getSiblings()),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)element=_ref[_i],element=$(element),_.isString(trigger)&&element.on(""+trigger+"."+this.id,_.bind(this.eventValidate,this)),"change"!==trigger?_results.push(element.on("change."+this.id,_.bind(this.eventValidate,this))):_results.push(void 0);return _results},FieldMultiple}(Field),ComposedField=function(_super){function ComposedField(elm,options){ComposedField.__super__.constructor.call(this,elm,options)}return __extends(ComposedField,_super),ComposedField.prototype.getComponents=function(){var components,field,fields,_i,_len;for(components=[],fields=this.element.data("composed").split(","),_i=0,_len=fields.length;_len>_i;_i++)field=fields[_i],components.push(this.element.find("[name="+field+"]"));return components},ComposedField.prototype.getValue=function(){var value;return value=_.map(this.getComponents(),function(x){return x.val()}).join(this.element.data("composed-joiner")),this.element.val(value),value},ComposedField.prototype.unbindEvents=function(){var component,_i,_len,_ref,_results;for(_ref=$(this.getComponents()),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)component=_ref[_i],_results.push(component.off("."+this.id));return _results},ComposedField.prototype.bindEvents=function(){var component,trigger,_i,_len,_ref,_results;for(this.unbindEvents(),trigger=this.element.data("trigger"),_ref=$(this.getComponents()),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)component=_ref[_i],_.isString(trigger)&&component.on(""+trigger+"."+this.id,_.bind(this.eventValidate,this)),"change"!==trigger?_results.push(component.on("change."+this.id,_.bind(this.eventValidate,this))):_results.push(void 0);return _results},ComposedField}(Field),Form=function(){function Form(elm,options){null==options&&(options={}),this.id=_.uniqueId("checksleyform-"),this.element=$(elm),this.options=_.extend({},defaults,options),this.initialize()}return Form.prototype.initialize=function(){return this.initializeFields(),this.bindEvents(),this.bindData()},Form.prototype.bindData=function(){return this.element.data("checksley",this)},Form.prototype.unbindData=function(){return this.element.data("checksley",null)},Form.prototype.initializeFields=function(){var composedField,element,field,fieldElm,_i,_j,_len,_len1,_ref,_ref1,_results;for(this.fields=[],this.fieldsByName={},_ref=this.element.find(this.options.inputs),_i=0,_len=_ref.length;_len>_i;_i++)fieldElm=_ref[_i],element=$(fieldElm),element.is(this.options.excluded)||(field=element.is("input[type=radio], input[type=checkbox]")?new checksley.FieldMultiple(fieldElm,this.options):new checksley.Field(fieldElm,this.options),field.setForm(this),this.fields.push(field),this.fieldsByName[element.attr("name")]=field);for(_ref1=this.element.find("[data-composed]"),_results=[],_j=0,_len1=_ref1.length;_len1>_j;_j++)composedField=_ref1[_j],field=new checksley.ComposedField(composedField,this.options),field.setForm(this),_results.push(this.fields.push(field));return _results},Form.prototype.setErrors=function(errors){var error,field,name,_results;_results=[];for(name in errors)error=errors[name],field=this.fieldsByName[name],field?_results.push(field.setErrors(error)):_results.push(void 0);return _results},Form.prototype.validate=function(){var field,invalidFields,valid,_i,_len,_ref;for(valid=!0,invalidFields=[],_ref=this.fields,_i=0,_len=_ref.length;_len>_i;_i++)field=_ref[_i],field.validate()===!1&&(valid=!1,invalidFields.push(field));if(!valid)switch(this.options.focus){case"first":invalidFields[0].focus();break;case"last":invalidFields[invalidFields.length].focus()}return valid},Form.prototype.bindEvents=function(){var self;return self=this,this.unbindEvents(),this.element.on("submit."+this.id,function(event){var ok;return ok=self.validate(),self.options.listeners.onFormSubmit(ok,event,self),self.options.interceptSubmit&&!ok?event.preventDefault():void 0})},Form.prototype.unbindEvents=function(){return this.element.off("."+this.id)},Form.prototype.removeErrors=function(){var field,_i,_len,_ref,_results;for(_ref=this.fields,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)field=_ref[_i],_results.push(field.reset());return _results},Form.prototype.destroy=function(){var field,_i,_len,_ref;for(this.unbindEvents(),this.unbindData(),_ref=this.fields,_i=0,_len=_ref.length;_len>_i;_i++)field=_ref[_i],field.destroy();return this.field=[]},Form.prototype.reset=function(){var field,_i,_len,_ref,_results;for(_ref=this.fields,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)field=_ref[_i],_results.push(field.reset());return _results},Form}(),checksley=new Checksley,checksley.updateMessages("default",messages),checksley.injectPlugin(),checksley.Checksley=Checksley,checksley.Form=Form,checksley.Field=Field,checksley.FieldMultiple=FieldMultiple,checksley.ComposedField=ComposedField,this.checksley=checksley}.call(this);